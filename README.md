# NLP练习
### 基于知识图谱的问答系统

# 相关流程：
### 1、建立图谱（结构化的，详见代码；非结构化的需要的NLP特别多）
### 2、构建类别判定（可以基于机器学习方法或者深度学习方法的文本分类或者是基于关键字的规则方法）（本文为规则方法）
### 3、提取问题中的实体
### 4、根据类别和实体构建查询语句并查询
### 5、根处理查询结果并输出
# 部分知识图谱展示
<div align=center><img  src="https://github.com/renhongjie/NLP_process/blob/main/images/电影问答系统1.png"/></div>
<p align="center">图1</p>


### 项目结构描述
```
├── README.md       // 描述文件
├── 建立词表.py     // 建立词表的程序文件
├── 建立图谱.py     // 建立知识图谱的程序文件
├── chatbot_graph.py     // 聊天系统主函数文件/运行文件
├── question_classifier.py        // 聊天系统问题分类函数 
├── question_parser.py        // 聊天系统问题转换函数 
├── answer_search.py        // 聊天系统问题回复函数
├── genre.txt        // 建立的词表 
├── movie.txt        // 建立的词表  
├── person.txt        // 建立的词表  
└── data   //数据文件
    └── genre.csv               // 图谱数据集之一
    └── movie_to_genre.csv               // 图谱数据集之一
    └── movie.csv               // 图谱数据集之一
    └── person_to_movie.csv               // 图谱数据集之一
    └── person.csv               // 图谱数据集之一
    └── userdict3.txt               // 图谱数据集之一
    └── vocabulary.txt              // 图谱数据集之一
    └── question              // 问题模版（项目中未用，但参考了）
        └── ...              // 16个问题模版

```

# 样例展示：
```
第0个问题是十面埋伏和功夫的评分：

没能理解您的问题，我数据量有限。。。能不能问的标准点

十面埋伏的评分是：7.099999904632568

功夫的评分是：7.199999809265137


第1个问题是十面埋伏和功夫的上映时间：

没能理解您的问题，我数据量有限。。。能不能问的标准点

十面埋伏的上映时间是：2004-05-19

功夫的上映时间是：2004-02-10



第2个问题是十面埋伏和功夫的风格：

没能理解您的问题，我数据量有限。。。能不能问的标准点

十面埋伏的类型是：爱情、动作、剧情、冒险、动作、剧情

功夫的类型是：犯罪、喜剧、动作、奇幻



第3个问题是十面埋伏和功夫的简介：

没能理解您的问题，我数据量有限。。。能不能问的标准点

十面埋伏的剧情是：唐大中十三年，皇帝昏庸，朝廷腐败，民间涌现不少反官府的组织，其中以飞刀门的势力最大。飞刀门总部设在靠近都城长安的奉天县境内，朝廷深以为患，逐严令奉天县加以剿灭。飞刀门帮主柳云飞虽在与奉天县官兵的战斗中牺牲，但在新任帮主领导之下，飞刀门的势头不减反增。 　　奉天县两大捕头：刘捕头(刘德华饰)、金捕头(金城武饰)奉命于十日之内，将飞刀门新任帮主缉拿归案。刘捕头怀疑新店牡丹坊的舞妓小妹(章子怡饰)是飞刀门前帮主柳云飞的女儿，逐用计将她拿下，押入天牢。二人并再度设下圈套：由金捕头化名随风大侠，乘夜劫狱，救出小妹；借此骗取小妹的信任，查出飞刀门的巢穴，以便一举剿灭。 　　随风依计救走小妹。逃亡路上，随风对小妹呵护备致，小妹不禁对他渐生情愫；而随风与小妹朝夕相对，亦被她的出尘气质深深吸引。星月之夜，二人终究按捺不住，狂烈恋火，眼看一发不可收拾…… 　　林外，罡风凛冽，隐隐杀机正悄悄地向他们进逼…… 　　随风、小妹，这对不应相爱、却爱得炽热的恋人，将面临怎样的命运？明明有爱，为何内心深处，总埋伏着深不可测的阴谋与及看不见的颤抖……

功夫的剧情是：1940年代的上海，自小受尽欺辱的街头混混阿星（周星驰）为了能出人头地，可谓窥见机会的缝隙就往里钻，今次他盯上行动日益猖獗的黑道势力“斧头帮”，想借之大名成就大业。　　阿星假冒“斧头帮”成员试图在一个叫“猪笼城寨”的地方对居民敲诈，不想引来真的“斧头帮”与“猪笼城寨”居民的恩怨。“猪笼城寨”原是藏龙卧虎之处，居民中有许多身怀绝技者（元华、梁小龙等），他们隐藏于此本是为远离江湖恩怨，不想麻烦自动上身，躲都躲不及。而在观战正邪两派的斗争中，阿星逐渐领悟功夫的真谛。


第4个问题是十面埋伏和功夫的演员：

没能理解您的问题，我数据量有限。。。能不能问的标准点

十面埋伏的演员名单是：刘德华、章子怡、高雄、林国斌、Stanley Fung

功夫的演员名单是：Kai Shi Chen、冯小刚、Jia Kang-Xi、陈国坤、Chiu Chi-Ling、Dung Chi-Wa、Tenky Tin Kai-Man、Bruce Leung Siu-Lung、林子聪、元秋、Fung Hak-On、黄圣依、Xing Yu、Yuen Cheung-Yan、元华、周星驰、林雪


第5个问题是李连杰和成龙的简介：

没能理解您的问题，我数据量有限。。。能不能问的标准点

李连杰的介绍是：李连杰（Jet Li），1963年4月26日生于北京市，华语影视男演员、导演、制作人 、武术运动员、商人。1971年进入北京什刹海体校，从而开始武术运动员的生涯。1975年参加全运会武术套路比赛，获得全能冠军。1979年因伤退出武术界。1982年主演个人首部电影《少林寺》，该片打破华语电影在中国内地的票房纪录。1986年自导自演动作片《中华英雄》。1991年主演的动作片《黄飞鸿之壮志凌云》奠定其在影坛的地位。1992年凭借武侠片《笑傲江湖Ⅱ：东方不败》获得更多关注。1995年获得第32届台湾电影金马奖大陆人士特别奖 。1998年赴美国好莱坞发展，同年出演其在好莱坞的首部电影《致命武器4》。2001年担任动作片《变种元素》的制作人。2002年因主演武侠片《英雄》而成为美国《时代周刊》的封面人物 。2003年凭借动作片《宇宙追缉令》获得第12届MTV电影奖最佳打斗场面提名。2008年凭借动作片《投名状》获得第27届香港电影金像奖最佳男主角 。2009年成为中国企业家俱乐部会员。2010年入选美国《时代周刊》“年度最具影响力人物百人榜” 。2011年参与创办太极禅国际文化发展有限公司。2013年在《中华武术》三十年颁奖盛典中，获得“中华武术30年最具武术影响力人物奖”。2016年主演古装片《封神传奇》 。李连杰热心公益慈善。2007年创建公益组织壹基金。2009年担任世界卫生组织亲善大使。2010年担任国际红十字会亲善大使。2014年在《中国慈善家》“中国慈善名人榜”中排名第二位。

找不到成龙的介绍


第6个问题是成龙和李连杰和周星驰合作的电影：

没能理解您的问题，我数据量有限。。。能不能问的标准点

成龙、李连杰、周星驰共同出演的电影有：建国大业


第7个问题是成龙和李连杰和周星驰总共演了多少的电影：

没能理解您的问题，我数据量有限。。。能不能问的标准点

成龙总共演过的电影有：179部

李连杰总共演过的电影有：55部

周星驰总共演过的电影有：62部


第8个问题是成龙和李连杰合作的电影：

没能理解您的问题，我数据量有限。。。能不能问的标准点

成龙、李连杰共同出演的电影有：建国大业、The Forbidden Kingdom、黄飞鸿之二男儿当自强、Chop Socky: Cinema Hong Kong、Ultimate Fights from the Movies、Eastern Heroes: The Video Magazine - Volume 2、Top Fighter


第9个问题是周星驰和李连杰的生日是？：

没能理解您的问题，我数据量有限。。。能不能问的标准点

周星驰的生日是：1962-06-22

李连杰的生日是：1963-04-26


第10个问题是我女朋友是谁？：

没能理解您的问题，我数据量有限。。。能不能问的标准点
```
# 流程：
#### chatbot_graph(总控)->question_classifier（分类）->question_parser（构建查询语句）->answer_search（处理查询结果并输出）

## 基本规则写的，后期优化：加一些深度学习方法和多轮问答功能，存在一点小问题，每次都回答不知道，后期再改改

## 改进
 添加多轮对话
 
 用神经网络替换规则